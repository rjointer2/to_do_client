
// next
import Head from 'next/head';
import { useRouter } from 'next/router';

// components
import Navbar from '../client_modules/components/Navbar/Navbar';
import NavDropDown from '../client_modules/components/DropDowns/NavDropDown/NavDropDown';

// react
import { useEffect } from 'react';


// apollo
import { TODOS } from '../client_modules/apollo_client/querys/todos';
import { useGlobalState } from '../client_modules/hooks/useGlobalStateHook';
import { useQuery } from '@apollo/client';
import { ME } from '../client_modules/apollo_client/querys/user'
import { AppLayout, AppLayOutItems } from '../client_modules/styled_components/aligment';
import Settings from '../client_modules/components/Settings/Settings';
import ActionButton from '../client_modules/components/ActionButton/ActionButton';
import TodoDropDown from '../client_modules/components/DropDowns/TodoDropDown/TodoDropDown';





export default function Home() {

  const { state, dispatch } = useGlobalState();
  const { menu } = state




  let offset = 0
  let limit = 10

  const { data: todoData, error: todoError, loading: todoLoading, fetchMore: getMoreTodos } = useQuery(TODOS, {
    variables: {  "offset": offset, "limit": limit }
  });

  const { data, loading, error } = useQuery(ME)

  useEffect(() => {
    console.log(error)
    console.log(data)
  }, [data])

  useEffect(() => {
    console.log(todoLoading)
    if(todoData) {
      console.log(todoData.todos)
    }
  }, [todoData]);

  return (
    <>
      <Head>
        <title>To Do App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <NavDropDown />
      <TodoDropDown />
      <Navbar />


      <AppLayout>
        <AppLayOutItems>
          <Settings/>
        </AppLayOutItems>
        <AppLayOutItems>
          <ActionButton />
          Hi World
        </AppLayOutItems>
      </AppLayout>
      
      
    </>
  )
}
